# HTTP Header

## **HTTP Header**

* HTTP 메시지 작성 시 전송에 필요한 부가정보를 나타내기 위해 사용하는 규약

## **메시지 바디 헤더**

body의 데이터(전달할 실제 데이터)에 대한 부가정보를 나타내는 헤더로, `요청 시`, `응답 시` 모두 사용한다.

요청 시에는 request body에 대한 부가 정보, 응답 시에는 response body에 대한 부가 정보를 나타낸다.

* **Content-Type: 데이터 형식**
  * ex) text/html, application/json, image/png
* **Content-Encoding: 데이터를 압축한다면 어떤 압축 방식을 사용하는지**
  * 요청 시 해당 헤더를 사용하면 응답 데이터도 해당 압축 방식으로 압축되어서 온다.
  * ex) gzip
* **Content-Language: 데이터가 어떤 언어로 이루어져 있는지**
  * ex) ko, en
* **Content-Length: 데이터의 길이 (숫자로 나타냄)**

## **컨텐츠 협상(Content Negotiation) 헤더**

클라이언트가 서버에게 받고자 하는 데이터에 대해 알려주기 위해 사용하는 헤더로, `요청 시` 사용한다.

* **Accept: 클라이언트가 선호하는 미디어 타입**
* **Accept-Charset: 클라이언트가 선호하는 문자 인코딩 타입**
* **Accept-Encoding: 클라이언트가 선호하는 압축 인코딩 타입**
* **Accept-Language: 클라이언트가 선호하는 언어**

### **컨텐츠 협상의 Quality Value(q)**

컨텐츠 협상에서는 서버에 어떤 타입의 리소스가 있는지 모르므로, 받고 싶은 타입을 여러 개 나열하고 타입 간 우선순위를 설정할 수 있다. 이 우선순위 값을 Quality Value라고 하며, `q`로 나타낸다.

0부터 1까지 소수점으로 설정 가능하며, 값이 클 수록 우선순위가 높다. q 값을 생략한 경우 자동으로 1로 설정된다.

ex) Accept-Language: ko-KR,ko;q=0.9,en-US;q=0.8;en;q=0.7 헤더에서 각 언어의 우선순위는?

* ko-KR: 생략했으므로 q=1이 되고 가장 높다.
* ko: q=0.9이므로 두 번째
* en-US: q=0.8이므로 세 번째
* en: q=0.7이므로 네 번째

서버에서 컨텐츠 협상 헤더에 없는 리소스밖에 줄 수 없는 경우에는 서버에서 정해둔 우선순위에 의해 리소스가 전달된다. (없다고 전달이 안 되지는 않는다는 것!)

## 요청 헤더

주로 클라이언트의 특정 정보를 전달하기 위해 사용되는 헤더

* Referer: 해당 요청 페이지의 이전 웹 페이지 주소 (뒤로가기 시 나타날 URI)
  * 데이터 분석에서 특정 페이지의 유입 경로 분석을 위해 자주 사용
* User-Agent: 클라이언트 애플리케이션(ex: 브라우저) 정보
  * 각 브라우저 별 통계 데이터를 얻을 수 있다.
* Host: 요청한 호스트(애플리케이션의 도메인) 정보
  * 물리적으로 하나의 서버(또는 IP)에서 여러 도메인의 애플리케이션을 처리하는 경우도 있어 해당 헤더를 통해 어떤 애플리케이션에 전달되어야 하는 HTTP 메시지인지를 결정한다. 때문에 HTTP Spec에서는 해당 헤더를 `필수 헤더`로 지정하고 있다.

## 응답 헤더

* Server: 클라이언트의 User-Agent처럼, 서버의 소프트웨어 정보를 나타냄
  * 이 때 서버는 실제 요청을 처리하는 origin 서버
* Date: 응답 메시지가 생성된 날짜/시간

## 응답 상태 코드 관련 헤더

* Allow: 405 Method Not Allowed 응답에 포함되는 헤더로, 사용 가능한 HTTP Method를 알려줌
* Location: 리소스의 위치를 알려주는 헤더로, 두 가지 경우 사용
  * 201 Created와 함께 사용: 새롭게 생성된 리소스의 URI
  * 3xx(리다이렉션 관련 상태 코드)와 함께 사용: 해당 페이지로 요청을 자동 리다이렉션
* Retry-After: 503 Service Unavailable 응답 시 언제까지 이용 불가능인지를 알려줌

## 일부 데이터 **전송 헤더**

컨텐츠 전부를 받아보는 대신 일부만 받아볼 수 있도록 하는 헤더

범위 요청을 할 경우 메시지 바디 헤더 `Content-Length`는 사용하지 말아야 한다.

* Transfer-Encoding: 응답 데이터가 분할 전송된다.
* Range: 요청 시에 사용하며, 특정 단위로 특정 범위만큼 데이터를 전송할 것을 요청 (단위는 주로 bytes)
  * ex) Range: bytes=200-1000, 1001-2000, …
* Content-Range: Range 요청에 대한 응답 시 사용하며, 전체 바디 메시지에 속한 부분 메시지의 위치를 알려줌
  * ex) Content-Range: bytes 1001-2000 / 2000

## 인증 관련 헤더

* Set-Cookie: 서버에서 클라이언트로 쿠키 전달 (응답 시 사용)
* Cookie: 클라이언트가 서버에게 저장된 쿠키 전달 (요청 시 사용)
* Authorization: 요청 시 클라이언트의 인증 정보를 서버에 전달
* WWW-Authenticate: 401 Unauthorized 응답 시 필요한 인증 방법을 설명하기 위해 사용

## 출처

[MDN - HTTP 헤더](https://developer.mozilla.org/ko/docs/Web/HTTP/Headers)
