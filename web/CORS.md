# π”— CORS

## CORS (Cross-Origin Resource Sharing, κµμ°¨ μ¶μ² μμ› κ³µμ )

### μ •μ

κµμ°¨ μ¶μ²(Cross Origin) κ°„ λ¦¬μ†μ¤ κ³µμ (Resource Sharing)μ μ•½μ

μ„λ΅ λ‹¤λ¥Έ Originμ„ κ°–λ” μ• ν”λ¦¬μΌ€μ΄μ… κ°„μ— λ¦¬μ†μ¤λ¥Ό κ³µμ ν•κ³ μ ν•  λ• μ¤€μν•΄μ•Ό ν•  κ·μ•½λ“¤μ„ `CORS Policy` λΌκ³  ν•¨

### ν΄λΌμ΄μ–ΈνΈ (λ¦¬μ†μ¤ μ”μ²­μ)

1. ν”„λ¦¬ν”λΌμ΄νΈ μ”μ²­ (OPTIONS) μΌλ΅ μ§€μ›ν•λ” λ©”μ†λ“, ν—¤λ” μ •λ³΄ ν™•μΈ
    - [Simple Request](https://developer.mozilla.org/ko/docs/Web/HTTP/CORS#%EB%8B%A8%EC%88%9C_%EC%9A%94%EC%B2%ADsimple_requests) μΈ κ²½μ°μ—λ” μƒλµλ¨
    - μ•„λλ” μ΄ OPTIONS μ”μ²­μ—μ„ μ‚¬μ©λλ” ν—¤λ”λ“¤
        - `Access-Control-Request-Method`
            - μ‚¬μ© κ°€λ¥ν• λ©”μ†λ“μΈμ§€λ¥Ό μ‘λ‹µλ°›κΈ° μ„ν• ν—¤λ”
        - `Access-Control-Request-Headers`
            - μ‚¬μ© κ°€λ¥ν• ν—¤λ”μΈμ§€λ¥Ό μ‘λ‹µλ°›κΈ° μ„ν• ν—¤λ”
2. ν”„λ¦¬ν”λΌμ΄νΈ μ”μ²­μ„ κΈ°λ°μΌλ΅ μ‹¤μ  μ”μ²­ μ „λ‹¬
    - μ• ν”λ¦¬μΌ€μ΄μ…μ„ κµ¬ν„ν•  λ•μ—λ” μ‹¤μ  μ”μ²­λ§μ„ μ‘μ„±ν•λ©°, `Fetch` λ“±μ μ”μ²­ λ©”μ†λ“κ°€ ν”„λ¦¬ν”λΌμ΄νΈλ¥Ό μλ™μΌλ΅ νΈλ¦¬κ±°

### μ„λ²„ (λ¦¬μ†μ¤ μ κ³µμ)

- ν”„λ¦¬ν”λΌμ΄νΈ(OPTION) μ”μ²­μ— λ€ν•΄μ„λ” λ‹¤μμ ν—¤λ”λ¥Ό ν†µν•΄ μ§€μ›ν•λ” λ©”μ†λ“, ν—¤λ” μ •λ³΄ μ κ³µ
    - `Allows` λλ” `Access-Control-Allow-Methods`
    - `Allow-Headers` λλ” `Access-Control-Allow-Headers`
- ν—μ©λ ν΄λΌμ΄μ–ΈνΈμΈμ§€ κ²€μ¦
    - ν—μ©λ ν—¤λ”λΌλ©΄ `Access-Control-Allow-Origin` ν—¤λ”λ¥Ό ν¬ν•¨ν• μ‘λ‹µ μ κ³µ
    - ν”„λ¦¬ν”λΌμ΄νΈ, μ‹¤μ  μ”μ²­ λ¨λ‘ μ΄ κ³Όμ •(ν—¤λ”)μ΄ μ”κµ¬λ¨

### μ„λ²„-ν΄λΌμ΄μ–ΈνΈ μ”μ²­ νλ¦„

1. ν΄λΌμ΄μ–ΈνΈ β€” ν”„λ¦¬ν”λΌμ΄νΈ μ”μ²­
    - [Simple Request](https://developer.mozilla.org/ko/docs/Web/HTTP/CORS#%EB%8B%A8%EC%88%9C_%EC%9A%94%EC%B2%ADsimple_requests) μΈ κ²½μ°μ—λ” μƒλµλ¨ (μ¤‘μ”ν•λ―€λ΅ ν• λ² λ” κ°•μ΅°)
2. μ„λ²„ β€” ν”„λ¦¬ν”λΌμ΄νΈ μ”μ²­μ— λ€ν• μ‘λ‹µ (μ‚¬μ© κ°€λ¥ λ©”μ†λ“, ν—¤λ” μ •λ³΄ ν¬ν•¨)
3. ν΄λΌμ΄μ–ΈνΈ β€” μ„λ²„μ μ‘λ‹µ κΈ°λ°μΌλ΅ μ‹¤μ  μ”μ²­ λ©”μ‹μ§€ μƒμ„±
4. μ„λ²„ β€” μ‹¤μ  μ”μ²­μ— λ€ν• μ‘λ‹µ

### μΈμ¦ μ”μ²­μΈ κ²½μ°

- ν΄λΌμ΄μ–ΈνΈ β€” `withCredentials: true`
    - μ΄κ±Έ ν¬ν•¨ν•΄μ•Ό ν—¤λ”μ— μΏ ν‚¤ μ •λ³΄λ¥Ό λ„£μ
- μ„λ²„ β€” `Access-Control-Allow-Credentials: true`
    - λΈλΌμ°μ €λ” μΈμ¦ μ”μ²­μ— λ€ν• μ‘λ‹µ ν—¤λ”μ— μ΄κ² μ—†μΌλ©΄ νκΈ°
    - μ„λ²„μ—μ„ μ΄ ν—¤λ”λ¥Ό ν¬ν•¨ν•κ³ μ ν•λ©΄ `Allow-Origin` μ€ μ™€μΌλ“μΉ΄λ“λ΅ μ„¤μ • λ¶κ°€

### μ£Όμμ‚¬ν•­

- CORSλ” κΈ°λ³Έμ μΌλ΅ λ¬΄μ΅°κ±΄ μ”μ²­μ— `origin μ •λ³΄`κ°€ μμ–΄μ•Ό ν—μ©ν•΄μ¤„ μ μμ
    - λ¦¬μ†μ¤λ¥Ό μ”μ²­ν• μ¤λ¦¬μ§„μ΄ ν—μ©λ μ¤λ¦¬μ§„μΈμ§€ μ•„λ‹μ§€ νλ³„ν•΄μ•Ό ν•λ―€λ΅ λ‹Ήμ—°ν•¨

### μ¶μ²

[MDN] [https://developer.mozilla.org/ko/docs/Web/HTTP/CORS](https://developer.mozilla.org/ko/docs/Web/HTTP/CORS)