# 결합도와 응집도

## 결합도

- 모듈 간 서로 의존하는 정도
- 모듈 간에 얼마나 밀접한 관계를 맺고 있는지를 나타냄
- 결합도가 높을수록 한 쪽의 수정이 다른 쪽에 영향을 많이 미치게 됨
- 즉, 코드 수정 비용이 증가하여 유지보수가 어려워짐
- 따라서 결합도는 `낮추는 것이 좋음`

## 결합도의 유형

1. 자료 결합도 (약, Best)
    - 모듈 간 기본 타입 데이터를 파라미터로 전달하는 방식으로만 교환이 일어남
2. 스탬프 결합도
    - 모듈 간에 객체, 자료구조 등이 파라미터로 전달
3. 제어 결합도
    - 다른 모듈의 논리적 흐름을 제어
    - 인자로 받은 값에 의존하여 내부 로직이 제어되는 경우
4. 외부 결합도
    - 모듈 간 동일한 외부 모듈을 참조
5. 공통 결합도
    - 모듈 간 공통으로 사용하는 데이터(전역 변수)가 존재
6. 내용 결합도 (강, Worst)
    - 다른 모듈의 내부 변수/기능을 사용
    - 다른 모듈의 세부적인 내부 구현에 의존 (강결합)
    - 해당 모듈의 변경에 의해 변경이 일어날 확률이 매우 높아짐

## 결합도를 낮추는 방법

### 추상화

- 구체적인 것이 아닌 개념적인 것에 의존하도록 하는 것
- 클래스 자체에 의존하는 것이 아니라 각 클래스가 인터페이스를 구현하도록 하고 인터페이스에 의존
- 구현체의 내부 구현이 변경되어도 추상적인 것에 의존하는 쪽에는 변경이 필요 없음

### 이벤트

- 다음 로직을 수행할 객체의 메서드를 직접 호출하는 것이 아니라, 자신의 로직이 끝났다는 이벤트를 발행하여 다음 로직의 수행을 유도
- 객체 간 강결합을 제거할 수 있으며, 특정 로직 수행 이후의 동작을 쉽게 확장할 수 있음

## 응집도

- 모듈 내 요소들 관의 관련 정도
- 모듈 내 요소들이 얼마나 서로 관계있는 로직인지를 나타냄
- 응집도가 낮을수록 한 기능에 대한 수정이 여러 모듈에 영향을 미침
- 많은 모듈에 변경을 일으키게 되므로 유지보수가 어려워짐
- 따라서 응집도는 `높이는 것이 좋음`

## 응집도의 유형

1. 기능적 응집도 (강, Best)
    - 모듈 내 모든 기능이 단일 목적을 위해 수행
    - ex) ‘회원가입’이라는 단일 목적을 위해 수행되는 기능들을 모아둔 모듈
        - ‘회원’ 자체에 대한 모든 기능을 모아둔 경우 같은 기능을 위함이라고 보기 어려우며 응집도가 높다고 보기 어려움
2. 순차적 응집도
    - 한 기능의 출력이 다른 기능의 입력으로 제공
3. 교환적 응집도
    - 동일 입/출력을 사용하되 다른 일을 하는 기능들을 모아둔 것
4. 절차적 응집도
    - 기능이 순차적으로 수행
5. 논리적 응집도
    - 유사한 성격을 갖거나 특정 형태로 분류되는 요소들을 모아둔 것
6. 우연적 응집도 (약, Worst)
    - 기능 간 연관 없음
    - 사실상 상관 없는 기능들끼리 모여 있는 것으로, 한 기능의 변경이 상관 없는 다른 기능들에도 영향을 미치게 되는 가장 나쁜 유형

## 응집도를 높이는 방법

### 캡슐화

- 데이터/함수를 한 곳에 모으는 기법
- 캡슐화를 달성하는 방법 중 한 가지로 정보 은닉이 있음
    - 정보 은닉: 다른 객체에 자신의 세부 정보를 숨기고, 오직 공개된 연산만을 통해 접근할 수 있도록 하는 것

## 결합도와 응집도

- 결합도를 낮추는 것이 곧 응집도를 높이는 것이며, 반대 표현도 성립
- 추상화를 하면 결합도가 낮아짐과 동시에 추상으로 분리된 개념들이 잘 응집되어 응집도도 올라감
- 캡슐화를 하면 응집도가 올라감과 동시에 외부에서 세부 내용에 접근할 수 없게 하므로 결합도를 낮출 수 있음

## 결합도를 낮추고 응집도를 높이는 것이 반드시 좋은가?

- 객체지향 측면에서는 대부분 그러함
- 하지만 실제로 `코드 분석, 유지보수에 사용되는 시간의 절약` 측면에서는 그럴 수도 있고 아닐 수도 있음
- 강결합을 느슨하게 하기 위해 지나치게 추상화, 이벤트 등을 도입하면 결합도는 낮출 수 있지만 호출 관계에 따른 실제 수행 로직을 추적하기 어려워져 `실제로 어떤 비즈니스 로직이 동작하는지` 알기 어려워질 수 있음
- 높은 응집도를 위해 지나치게 메서드, 클래스를 분리하면 한 눈에 모든 코드를 보기 어려워 코드 흐름 파악이 어려워질 수 있음
- 따라서, 실무에서는 오히려 가독성을 해치지 않는 선에서 적절하게 도입하는 것이 중요
