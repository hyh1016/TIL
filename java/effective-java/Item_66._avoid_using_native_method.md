# Item 66. 네이티브 메서드는 신중히 사용하라

> 원본 제목은 '신중하게 사용하라'이나, 내용은 사용하지 않을 것을 적극 권장하는 내용이기 때문에 파일명에 avoid라는 표현을 사용.

## Java의 Native Interface

- 자바에서 C, C++과 같은 네이티브(저레벨) 프로그래밍 언어로 작성된 메서드를 호출하기 위해 사용하는 인터페이스
- 다음과 같은 목적으로 사용
    1. 레지스트리 같은 플랫폼 특화 기능 사용
    2. 이미 네이티브 코드로 작성된 기존 라이브러리를 사용
    3. 성능 개선을 위해 특정 영역만을 네이티브 언어로 작성
- Java 버전이 올라가며 점점 OS와 같은 하부 플랫폼에 접근할 수 있는 API들이 추가되고 있음
    - 기존에 네이티브 메서드를 쓰던 부분의 대부분이 Java 코드로 대체 가능해졌다는 소리

### 성능 개선 목적으로는 사용하지 않는 것을 권장

- 버전이 올라가면서 JVM의 성능도, 여러 연산 라이브러리의 성능도 많이 개선되었기 때문

### 네이티브 메서드를 사용하는 것의 단점

- 네이티브 언어는 안전하지 않음. Java와 같은 고레벨 언어에서는 알아서 차단되는 다양한 보안 취약성에 노출되어 있음
    - 메모리 훼손, 오버플로우와 같은 이슈
- 플랫폼에 의존하여 이식성이 낮음
    - 애시당초 Java가 인기를 얻게 된 주요 요인 중 하나가 JVM이라는 별도 머신에서 실행하도록 하여 OS의 종류와 상관 없이 같은 코드를 실행할 수 있게 한 점인데, 네이티브 언어에서는 이러한 이점을 누릴 수 없음
- 디버깅하기도 더 어려움
- 네이티브 메서드가 사용하는 메모리 영역은 GC에 의해 회수되지 않으며, 심지어 추적도 불가능
- Java 코드와 네이티브 코드의 경계를 넘나드는 데에도 비용이 들어감
- 네이티브 메서드를 호출하는 코드 자체도 귀찮고 가독성이 떨어짐
