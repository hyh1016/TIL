# Item 84. 프로그램의 동작을 스레드 스케줄러에 기대지 말라

## 스레드 스케줄러에 의존적인 프로그램을 짜지 말 것

### 스케줄러 의존적 프로그램의 문제점

- 스레드 스케줄러는 OS의 관리 영역으로, 동일 프로그램을 다른 플랫폼에 이식했을 때 성능이 달라질 수 있음
- 따라서 프로그램이 스케줄러에 의존하도록 만들면 안 되며, 비슷한 맥락으로 `Thread.yield` 등의 방법을 사용해 임의로 특정 스레드가 이득을 볼 수 있도록 하는 행동도 이식성을 나쁘게 만듦
    - 특히, 스레드에 `우선순위`를 부여하는 것은 자바에서 가장 이식성을 저하시키는 요인

## 이식성 좋은 프로그램을 작성하는 방법

- `실행 가능한 스레드의 평균 수`를 프로세서 수보다 많아지지 않도록 관리
- 실행 가능한 스레드의 수 = 전체 스레드 - 대기 스레드
- 즉, 대기 스레드를 늘려야 하며, 이를 위해 `불필요하게 실행되는 스레드가 생기지 않도록` 해야 함
    - 스레드를 busy-wait 상태로 만들면 안 됨
- 이를 위해 스레드 풀 크기는 적절히 선정하고, 각 스레드가 처리하는 작업을 짧게 유지하면 됨
    - 근데 너무 짧으면 오히려 작업을 스레드로 분배하는 일이 더 성능을 떨어트릴 수도 있음
