# Item 46. 스트림에서는 부작용 없는 함수를 사용하라

## 스트림의 핵심은 재구성

- 스트림은 함수형 프로그래밍에 기초한 패러다임
- 각 변환 단계는 이전 단계의 결과를 받아 처리하는 `순수 함수`
- 각 변환 단계는 모두 `부작용`(side-effect, 예상하지 못한 변화)를 일으키지 않아야 함
    - 람다는 지역변수의 읽기/쓰기가 불가능하며 단순히 불변의 데이터를 읽는 것만 가능
    - 만약 람다 함수 내에서 참조형 지역 변수의 내부값을 변경한다면 이는 의도하지 않은 변경으로 이어질 수 있음
- 가장 많은 실수를 일으키는 것은 forEach 종단 연산
    - 단순히 계산 결과를 보고하는 용도로만 사용해야
    - 계산에 사용하지 않도록 주의해야 함

## Collector

- 스트림의 원소들을 `하나의 컬렉션 객체로 취합`하기 위한 인터페이스

### toList

- List 컬렉션으로 취합하는 수집기

### toSet

- Set 컬렉션으로 취합하는 수집기

### toCollection(collectionFactory)

- 프로그래머가 지정한 컬렉션 타입으로 취합하는 수집기

### toMap

- Map 컬렉션으로 취합하는 수집기
- 인수 개수에 따라 다르게 동작
    - 인수 2개 - 각각 키, 값을 반환하는 함수를 받으며 키는 반드시 고유해야 함
    - 인수 3개 - 마지막 인자로 비교자를 받아 해당하는 원소를 값으로 저장
    - 인수 4개 - 마지막 인자로 맵 팩토리를 받아 맵 구현체를 지정

### groupBy

- 입력으로 분류 함수를 받아 출력으로 이 분류 함수를 key로 데이터를 모은 Map을 반환
    - 값의 타입은 List<?>
    - 리스트 외의 값을 갖는 Map을 생성하려면 `다운스트림(downstream) 수집기`를 명시해야 함
        - `groupBy(분류함수, 다운스트림수집기)`
        - 다운스트림 전용 수집기를 반환하는 counting() 메서드는 값의 개수의 총합을 값으로 갖게 함

### joining

- 원소들을 연결하는 수집기를 반환
- 인수 개수에 따라 다르게 동작
    - 인수 0개 - 단순히 연결만
    - 인수 1개 - 인자로 구분자(delimiter)를 받아 구분자를 연결 부위에 삽입
    - 인수 2개 - 인자로 접두문자(prefix), 접미문자(suffix)도 함께 받아 접두-구분-접미 문자를 통해 연결
