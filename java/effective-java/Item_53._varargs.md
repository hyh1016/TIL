# Item 53. 가변인수는 신중히 사용하라

## varargs

- 특정 타입의 인수를 0개 이상 받을 수 있는 표현식
- 몇 개의 인수를 받을지 정해지지 않았을 때 유용

### varargs의 성능 이슈

- 이 기능은 내부적으로 `넘겨준 인수 개수만큼의 배열(array)을 생성해 인수들을 할당`
- 메서드가 호출될 때마다 새로운 배열이 생성되기 때문에 성능 이슈로 이어질 수 있음

### varargs의 성능 이슈를 덜어낼 수 있는 구현 패턴

```java
// 95%의 요청 - 인수를 3개 이하로 사용
public void foo() {}
public void foo(int a1) {}
public void foo(int a1, int a2) {}
public void foo(int a1, int a2, int a3) {}

// 5%의 요청 - 인수를 4개 이상으로 사용
public void foo(int a1, int a2, int a3, int... rest) {}
```

- 다수 개의 인자를 받는 메서드를 정의할 때, 대다수의 호출에 대응할 수 있는 인수 개수까지의 메서드는 직접 오버로딩
- 그 이상의 인수가 전달되는 경우에만 가변 인자로 받음
- 대다수의 호출에는 가변인수로 전달되지 않고, 극히 일부의 (매우 많은 인자가 전달되는) 요청에 대해서만 가변인수 방식이 적용됨
- 실제로 EnumSet의 정적 팩터리에서도 이 기법을 통해 열거 타입의 집합의 생성 비용을 최소화
