# 🔍 Index

## Index란

### 정의

- 데이터의 조회 속도를 향상시키기 위해 사용하는 `자료구조`
- 특정 컬럼에 대해 `정렬된 순서로 원본에 대한 참조를 가지는` 별도의 데이터를 생성
    - 왜? 순서가 정렬되었음이 보장될 때, Binary Search와 같은 알고리즘을 통해 원하는 데이터를 더 빠르게 효율적으로 찾을 수 있기 때문!

### Index의 자료구조

- 최근에는 대부분 DB에서 `B+ Tree`를 채택
- B+ Tree란, Leaf가 아닌 Node들은 모두 값이 아니라 left/right child 분기의 기준이 되는 범위에 대한 정보를 가지고 오직 Leaf만이 실제 데이터를 갖는 자료구조
- log 시간복잡도로 원하는 데이터를 찾을 수 있음
- 또한, Leaf Node 간에 연결이 존재해 `범위 내 데이터의 조회 연산`에 효율적

### 장점

- 카디널리티(Cardinality)가 높은 컬럼에 잘 사용하면 조회 속도를 O(N)에서 O(logN)까지 개선할 수 있음
    - 카디널리티가 높다는 것은, 데이터의 중복도가 낮다는 것을 의미
    - 중복되는 데이터가 적으면 범위 연산이 효율적으로 작동하기 때문
- 정렬(ORDER BY), 조건부(WHERE) 연산 등에 효율적

### 단점

- 인덱스라는 별도의 데이터를 생성하기 때문에, 추가적인 공간을 사용함
- 생성/수정/삭제가 일어날 시 인덱스에도 이 변화가 반영되어야 함
- 즉, 공간 복잡도 면에서는 비효율적이고, 데이터를 조작하는 연산의 속도는 저하됨

### 그럼 언제 사용?

- 데이터의 카디널리티가 높고, 데이터의 생성/수정/삭제보다 조회 빈도가 훨씬 높은 컬럼에 사용하는 것이 좋음
- 대표적인 예시가 `Primary Key`이고, 때문에 PK에는 자동으로 index가 생성됨
- unique constraint가 부여된 컬럼도 카디널리티가 가장 높기 때문에 자동으로 index가 생성됨